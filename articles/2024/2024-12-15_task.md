---
title: "taskfile.dist.yml ã‚’ä½¿ã†"
emoji: "ğŸ“„"
type: "tech"  # tech or idea
topics: ["task","go-task","taskfiledev","adventcalendar","adventcalendar2024"]
published: true
---

# tl;dr

@[card](https://qiita.com/advent-calendar/2024/go-task)

@[card](https://taskfile.dev/)

- [å‰å›æ›¸ã„ãŸ](https://zenn.dev/raki/articles/2024-12-08_task#%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E5%90%8D%E3%81%AF%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF%E5%84%AA%E5%85%88%E5%BA%A6%E9%A0%86%E3%81%AB%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BE%E3%82%8C%E3%81%A6%E8%A6%8B%E3%81%A4%E3%81%8B%E3%81%A3%E3%81%9F%E3%82%89%E3%81%9D%E3%82%8C%E3%82%92%E4%BD%BF%E3%81%86)ãŒã€ãƒ•ã‚¡ã‚¤ãƒ«åã‚’å·¥å¤«ã™ã‚‹å°ãƒã‚¿
- `Taskfile.dist.yml` ã‚’ãƒªãƒã‚¸ãƒˆãƒªï¼ˆãƒãƒ¼ãƒ ï¼‰ã§ä½¿ç”¨ã—ã€`Taskfile.yml` ã‚’å€‹äººã§ä½¿ç”¨ã™ã‚‹

# å¼•ç”¨

> The intention of having the .dist variants is to allow projects to have one committed version (.dist) while still allowing individual
> users to override the Taskfile by adding an additional Taskfile.yml (which would be on .gitignore).

- [Usage | Task](https://taskfile.dev/usage/#supported-file-names)
- è¦ã¯çµ„ç¹”ã‚„ãƒãƒ¼ãƒ ã€ãƒªãƒã‚¸ãƒˆãƒªå›ºæœ‰ã®ã‚¿ã‚¹ã‚¯ã‚’ `Taskfile.dist.yml` ã«ã—ã¦ã€`Taskfile.yml` ã‚’å€‹äººã§èª¿æ•´ã«å¯èƒ½ã«ã™ã‚‹ã¨ä¾¿åˆ©ã ã‚ˆã€ã¨ã„ã†ã“ã¨

# è§£èª¬

- go-task ã¯å„ªå…ˆåº¦é †ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã€æœ€åˆã«è¦‹ã¤ã‹ã£ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹
- `Taskfile.yml` ã‚’ãƒªãƒã‚¸ãƒˆãƒªï¼ˆãƒãƒ¼ãƒ ï¼‰ã§ä½¿ç”¨ã—ã¦ã—ã¾ã†ã¨ä¸Šæ›¸ãã—ã«ãã„
- `Taskfile.dist.yml` ã‚’ãƒªãƒã‚¸ãƒˆãƒªã§ä½¿ç”¨ã™ã‚‹ã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã«ã™ã‚‹ã“ã¨ã§ã€å›ºæœ‰ã®å‡¦ç†ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã¾ã¾å®Ÿè¡Œã§ãã‚‹
- å€‹äººä½¿ç”¨ã®ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ ã—ãŸã‚Šã€ã‚¿ã‚¹ã‚¯ã‚’çµ„ã¿åˆã‚ã›ãŸã‚Šã™ã‚‹å ´åˆã€`Taskfile.yml` ã‚’ç”¨æ„ã—ã¦ã€`Taskfile.dist.yml` ã‚’ include ã™ã‚‹ã¨è‡ªç”±åº¦ãŒä¸ŠãŒã‚‹

```bash
team-repo $ ls
Taskfile.dist.yml  Taskfile.yml
team-repo $ t
task: Available tasks for this project:
* dist:summary:       view summary of all tasks      (aliases: dist:la)
* dist:test:          task tests                     (aliases: dist:tt)
* summary:            view summary of all tasks      (aliases: la)
```

```yaml:Taskfile.yml
# ã“ã‚“ãªæ„Ÿã˜ã§èª­ã¿è¾¼ã‚€
includes:
  dist:
    taskfile: ./Taskfile.dist.yml
```

- å¥½ããªaliasã‚’ä»˜ã‘ã¦distã‚’å‘¼ã³å‡ºã›ã°ã©ã†ã¨ã§ã‚‚ã§ãã‚‹
- internal ã«ã™ã‚Œã° dist ã‚’éè¡¨ç¤ºã«ã‚‚ã§ãã‚‹
- `.git/info/exclude` ã« `Taskfile.yml` ã‚’è¿½åŠ ã—ã¦ãƒªãƒã‚¸ãƒˆãƒªã®ç®¡ç†å¤–ã«ã™ã‚‹
- åˆ¥ã®å€‹äººç”¨ãƒªãƒã‚¸ãƒˆãƒªã« `Taskfile.repo.yml` ã®ã‚ˆã†ã«ã—ã¦ãŠã„ã¦ã€ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’ã¯ã‚Œã°gitç®¡ç†ã‚‚ã§ãã‚‹

```bash
team-repo $ ll
åˆè¨ˆ 4
-rw-r--r-- 1 raki raki 1413 11æœˆ 24 07:36 Taskfile.dist.yml
lrwxrwxrwx 1 raki raki   33 11æœˆ 24 07:36 Taskfile.yml -> ../my-repo/Taskfile_team-repo.yml
```

- ç™ºå±•ã•ã›ã‚‹ã¨è‡ªåˆ†ãŒä½¿ã†åˆ†ã ã‘ã‚’å–æ¨é¸æŠã—ã¦çµ„ã¿åˆã‚ã›ã‚‹ãªã©è‡ªç”±åº¦é«˜ã„

```bash
my-project-repo $ ls
Taskfile.backend.yml  Taskfile.dist.yml  Taskfile.frontend.yml  Taskfile.infra.yml
my-project-repo $ t
task: Available tasks for this project:
* b:a:                   Clean,Build,Deploy backend
* backend:build:         Build       (aliases: backend:b)
* backend:clean:         Clean       (aliases: backend:c)
* backend:deploy:        Deploy      (aliases: backend:d)
* f:a:                   Clean,Build,Deploy frontend
* frontend:build:        Build       (aliases: frontend:b)
* frontend:clean:        Clean       (aliases: frontend:c)
* frontend:deploy:       Deploy      (aliases: frontend:d)
* i:a:                   Clean,Build,Deploy infra
* infra:build:           Build       (aliases: infra:b)
* infra:clean:           Clean       (aliases: infra:c)
* infra:deploy:          Deploy      (aliases: infra:d)
```

# ã¾ã¨ã‚

- ã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ `Taskfile.dist.yml` ã«ã—ã¦ãŠãã¨ä¾¿åˆ©
- å€‹äººçš„ãªã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ¥ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã—ã¦ãŠã„ã¦ã€ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã§ `Taskfile.yml` ã«ã™ã‚‹ã¨ã¨ã¦ã‚‚ä¾¿åˆ©
- include æ™‚ã®ã‚­ãƒ¼ã‚’ãƒ•ã‚¡ã‚¤ãƒ«åã«ï¼ˆdistéƒ¨åˆ†ï¼‰ã«ã™ã‚‹ã¨ã‚ã‹ã‚Šã‚„ã™ã„
