---
title: "dotfiles リポジトリの式年遷宮"
emoji: "🫥"
type: "tech" # tech or idea
topics: ["git", "github","dotfiles"]
published: true
---

# tl;dr

- 2025 年に使っていた dotfiles 系のリポジトリを式年遷宮して刷新した
- 自分で使いやすいのが一番だと思ってるけど、他のやり方を学ぶ機会を逃してるかもしれないと思った

# 新リポジトリ

@[card](https://github.com/officel/dotfiles)

- まだちゃんと移行が終わってない
- 今のところディレクトリとファイル管理、それの配置処理だけ
- 旧リポジトリ分は再配置できてるはず

# 旧リポジトリ

- 2024年まで使っていた旧 dotfiles

@[card](https://github.com/officel/dotfiles_old)

- 2025年に使っていたリポジトリ

@[card](https://github.com/officel/config_bash)
@[card](https://github.com/officel/config_git)
@[card](https://github.com/officel/config_task)
@[card](https://github.com/officel/config_aqua)

# 式年遷宮

- 神社仏閣等で定期的にお引越しをするアレ
- 今あるものがちゃんと動いているうちに新しいものに移行させる
- 今年は新しい MacBook Air が出たら買いたいなと思っていて、その時になるべく手間暇かからないようにと思って

# 比較検討（ADR的な）

- [webpro/awesome-dotfiles](https://github.com/webpro/awesome-dotfiles) のツールをひととおり眺めた
- 個人的には次のような期待要件があった

  - 簡単であること
  - 現行から移行しやすいこと
  - 追加変更が容易であること
  - なるべく標準的であること
  - （個々のツールの）インストール後にする作業（PATHの追加とかrcに追記するようなもの）をシェルに合わせて自動化したい
  - 現行が bash （Ubuntu on Windows WSL2）で、MacBook を買ったら zsh になると思うので両立したい

- 結果として既存のツールだとぶっちゃけ面倒だと感じた
- 独自の DSL やテンプレを処理するくらいならベタなファイルでいいし、コマンドを叩けばいい
- むしろ必要なコマンドを再確認しながら整理したほうが良さそう

# というわけで

- 元々そんなに多くのものを管理していない
- 秘密鍵等は再作成するか、別のクレデンシャルツールから取り出すから必要ない
- ツール管理の多くを aqua に揃えていて、ないものを brew で管理している
- タスクマネージャーは go-task にしている
- で、大雑把に次のような流れでいけるかなと

  - brew で初期インストール（git等を最新化したいし）
  - 鍵ファイル等のクレデンシャルを配置
  - dotfiles リポジトリを clone
  - brewfile でインストール（aquaもここから入る）
  - aqua でツールのインストール（go-taskもここから入る）
  - go-task で配置

- Taskfile そこそこ自信作だから見てｗ
