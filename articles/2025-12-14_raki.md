---
title: "pre-commit の ruff が ruff-check になってた"
emoji: "✅"
type: "tech" # tech or idea
topics: ["git", "pre-commit", "prek", "ruff"]
published: true
---

# tl;dr

- pre-commit hook の action ruff が ruff-check になってた
- 今のところ放置しても問題なさげだけど変更しておくといいかも
- つまりこういうこと

```diff
diff --git a/.pre-commit-config.yaml b/.pre-commit-config.yaml
index a7fe65a..f374141 100644
--- a/.pre-commit-config.yaml
+++ b/.pre-commit-config.yaml
@@ -4,7 +4,7 @@ repos:
   - repo: https://github.com/astral-sh/ruff-pre-commit
     rev: v0.14.9
     hooks:
-      - id: ruff
+      - id: ruff-check
         args:
           - --fix
       - id: ruff-format
```

# 前提

- [pre-commit](https://pre-commit.com/) または [prek を使ってみる ADR - alternative pre-commit -](https://zenn.dev/raki/articles/2025-10-19_prek_alternative_pre-commit) を使っている
- Python で [astral-sh/ruff](https://github.com/astral-sh/ruff) を使っている
- 必然的に [astral-sh/ruff-pre-commit](https://github.com/astral-sh/ruff-pre-commit) を使っている

# 経緯

- ちょっと前から気がついてはいたんだけど見てみないふりをしていた

![legacy](/images/2025-12-14-01.png)

- なんだろうと思って調べてみた
- [Friendlier names for the hooks · Issue #123 · astral-sh/ruff-pre-commit](https://github.com/astral-sh/ruff-pre-commit/issues/123)
- ~~（どうせ直すなら check xxx に揃えればいいのにね）~~
- というわけで前述のように `ruff` を `ruff-check` に修正した

![ruff-check](/images/2025-12-14-02.png)

- clean!

# 反省等

- pre-commit の設定のバージョンアップは定期的に pre-commit autoupdate をワークフローで走らせている
- そのためほぼフルオートで実行されていて、各アクションのバージョンアップ内容についての精査が甘かった
- もちろんエラーになれば気がつくけど、ワーニングすら出ていないならまぁいいかなって
- こういう油断や慢心がいつか大きな失敗になるかもしれない
- 毎回全部チェックするのは無理だけど、定期的にちゃんと見直すべきだなって思った

# おわりに

- 実際のところ、少し前から legacy 表示が出てることには気がついてたんだけども
- 最近 Python あんまり書かないので（言い訳）
- uv や ansible の定期スキル見直し（個人的な習慣のひとつ）をしていてそろそろ見直すかなって
- 記事にするのにもちょうどいいし（よく見たらこの記事が zenn での通算 100 記事目っぽい）
- ま、たいした話ではないわけだけど、ruff を pre-commit で使っていてまだ対応していない人がいたらこの機会にどうぞということで
